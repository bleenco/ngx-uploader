System.register("src/app/services/ng2-uploader/ng2-uploader",["angular2/core"],function(a){var b,c,d,e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0};return{setters:[function(a){b=a}],execute:function(){c=function(){function a(a,b,c){this.id=a,this.originalName=b,this.size=c,this.progress={loaded:0,total:0,percent:0},this.done=!1,this.error=!1,this.abort=!1}return a.prototype.setProgres=function(a){this.progress=a},a.prototype.setError=function(){this.error=!0,this.done=!0},a.prototype.setAbort=function(){this.abort=!0,this.done=!0},a.prototype.onFinished=function(a,b,c){this.status=a,this.statusText=b,this.response=c,this.done=!0},a}(),d=function(){function a(){this.cors=!1,this.withCredentials=!1,this.multiple=!1,this.maxUploads=3,this.allowedExtensions=[],this.maxSize=!1,this.data={},this.noParams=!0,this.autoUpload=!0,this.multipart=!0,this.method="POST",this.debug=!1,this.customHeaders={},this.encodeHeaders=!0,this._queue=[],this._emitter=new b.EventEmitter(!0)}return a.prototype.setOptions=function(a){this.url=a&&a.url||this.url,this.cors=a&&a.cors||this.cors,this.withCredentials=a&&a.withCredentials||this.withCredentials,this.multiple=a&&a.multiple||this.multiple,this.maxUploads=a&&a.maxUploads||this.maxUploads,this.allowedExtensions=a&&a.allowedExtensions||this.allowedExtensions,this.maxSize=a&&a.maxSize||this.maxSize,this.data=a&&a.data||this.data,this.noParams=a&&a.noParams||this.noParams,this.autoUpload=a&&a.autoUpload||this.autoUpload,this.multipart=a&&a.multipart||this.multipart,this.method=a&&a.method||this.method,this.debug=a&&a.debug||this.debug,this.customHeaders=a&&a.customHeaders||this.customHeaders,this.encodeHeaders=a&&a.encodeHeaders||this.encodeHeaders,this.multiple||(this.maxUploads=1)},a.prototype.uploadFilesInQueue=function(){var a=this,b=this._queue.filter(function(a){return!a.uploading});b.map(function(b){a.uploadFile(b)})},a.prototype.uploadFile=function(a){var b=this,d=new XMLHttpRequest,e=new FormData;e.append("file",a,a.name);var f=new c(this.generateRandomIndex(),a.name,a.size),g=this._queue.map(function(b,c){return b===a?c:void 0})[0];d.upload.onprogress=function(a){if(a.lengthComputable){var c=Math.round(a.loaded/a.total*100);f.setProgres({total:a.total,loaded:a.loaded,percent:c}),b._emitter.emit(f)}},d.upload.onabort=function(a){f.setAbort(),b._emitter.emit(f)},d.upload.onerror=function(a){f.setError(),b._emitter.emit(f)},d.onreadystatechange=function(){d.readyState===XMLHttpRequest.DONE&&(f.onFinished(d.status,d.statusText,d.response),b.removeFileFromQueue(g),b._emitter.emit(f))},d.open(this.method,this.url,!0),d.withCredentials=this.withCredentials,d.send(e)},a.prototype.addFilesToQueue=function(a){for(var b=0;b<a.length;b++){var c=a[b];this.isFile(c)&&!this.inQueue(c)&&this._queue.push(c)}this.autoUpload&&this.uploadFilesInQueue()},a.prototype.removeFileFromQueue=function(a){this._queue.splice(a,1)},a.prototype.clearQueue=function(){this._queue=[]},a.prototype.getQueueSize=function(){return this._queue.length},a.prototype.inQueue=function(a){var b=this._queue.filter(function(b){return b===a});return b.length?!0:!1},a.prototype.isFile=function(a){return null!==a&&(a instanceof Blob||a.name&&a.size)},a.prototype.log=function(a){this.debug&&console.log("[Ng2Uploader]:",a)},a.prototype.generateRandomIndex=function(){return Math.random().toString(36).substring(7)},a=e([b.Injectable(),f("design:paramtypes",[])],a)}(),a("Ng2Uploader",d)}}}),System.register("src/app/directives/ng-file-select/ng-file-select",["angular2/core","../../services/ng2-uploader/ng2-uploader"],function(a){var b,c,d,e=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=3>f?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(3>f?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},f=this&&this.__metadata||function(a,b){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(a,b):void 0};return{setters:[function(a){b=a},function(a){c=a}],execute:function(){d=function(){function a(a){var d=this;this.el=a,this.onUpload=new b.EventEmitter,this.uploader=new c.Ng2Uploader,setTimeout(function(){d.uploader.setOptions(d.options)}),this.uploader._emitter.subscribe(function(a){d.onUpload.emit(a)})}return a.prototype.onFiles=function(){var a=this.el.nativeElement.files;a.length&&this.uploader.addFilesToQueue(a)},a=e([b.Directive({selector:"[ng-file-select]",inputs:["options: ng-file-select"],outputs:["onUpload"],host:{"(change)":"onFiles()"}}),f("design:paramtypes",[b.ElementRef])],a)}(),a("NgFileSelect",d)}}}),System.register("ng2-uploader",["./src/app/services/ng2-uploader/ng2-uploader","./src/app/directives/ng-file-select/ng-file-select"],function(a){function b(b){var c={};for(var d in b)"default"===d||f.hasOwnProperty(d)||(c[d]=b[d]);a(c)}var c,d,e,f={UPLOAD_DIRECTIVES:!0};return{setters:[function(a){c=a,b(a)},function(a){d=a,b(a)}],execute:function(){a("default",{directives:[d.NgFileSelect],providers:[c.Ng2Uploader]}),a("UPLOAD_DIRECTIVES",e=[d.NgFileSelect])}}});
//# sourceMappingURL=ng2-uploader.min.js.map